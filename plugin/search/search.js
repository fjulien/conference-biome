!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RevealSearch=t()}(this,(function(){"use strict";
/*!
	 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
	 * by navigatating to that slide and highlighting it.
	 *
	 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
	 */return()=>{let e,t,n,o,l,i,s;function d(){t=document.createElement("div"),t.classList.add("searchbox"),t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex=10,t.innerHTML='<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>\n\t\t</span>',n=t.querySelector(".searchinput"),n.style.width="240px",n.style.fontSize="14px",n.style.padding="4px 6px",n.style.color="#000",n.style.background="#fff",n.style.borderRadius="2px",n.style.border="0",n.style.outline="0",n.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",n.style["-webkit-appearance"]="none",e.getRevealElement().appendChild(t),n.addEventListener("keyup",(t=>{if(13===t.keyCode)t.preventDefault(),function(){if(i){const e=n.value;""===e?(s&&s.remove(),o=null):(s=new c("slidecontent"),o=s.apply(e),l=0)}o&&(o.length&&o.length<=l&&(l=0),o.length>l&&(e.slide(o[l].h,o[l].v),l++))}(),i=!1;else i=!0}),!1),a()}function r(){t||d(),t.style.display="inline",n.focus(),n.select()}function a(){t||d(),t.style.display="none",s&&s.remove()}function c(t,n){const o=document.getElementById(t)||document.body,l=n||"EM",i=new RegExp(`^(?:${l}|SCRIPT|FORM)$`),s=["#ff6","#a0ffff","#9f9","#f99","#f6f"],d=[];let r=0,a="";const c=[];this.setRegex=e=>{e=e.trim(),a=new RegExp(`(${e})`,"i")},this.getRegex=()=>a.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," "),this.hiliteWords=function(t){if(void 0!==t&&t&&a&&!i.test(t.nodeName)){if(t.hasChildNodes())for(let e=0;e<t.childNodes.length;e++)this.hiliteWords(t.childNodes[e]);if(3===t.nodeType){let n,o;if((n=t.nodeValue)&&(o=a.exec(n))){let n=t;for(;null!=n&&"SECTION"!==n.nodeName;)n=n.parentNode;const i=e.getIndices(n),a=c.length;let p=!1;for(let e=0;e<a;e++)c[e].h===i.h&&c[e].v===i.v&&(p=!0);p||c.push(i),d[o[0].toLowerCase()]||(d[o[0].toLowerCase()]=s[r++%s.length]);const f=document.createElement(l);f.appendChild(document.createTextNode(o[0])),f.style.backgroundColor=d[o[0].toLowerCase()],f.style.fontStyle="inherit",f.style.color="#000";const h=t.splitText(o.index);h.nodeValue=h.nodeValue.substring(o[0].length),t.parentNode.insertBefore(f,h)}}}},this.remove=()=>{const e=document.getElementsByTagName(l);let t;for(;e.length&&(t=e[0]);)t.parentNode.replaceChild(t.firstChild,t)},this.apply=function(e){if(void 0!==e&&e)return this.remove(),this.setRegex(e),this.hiliteWords(o),c}}return{id:"search",init:n=>{e=n,e.registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",(e=>{"F"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),t||d(),"inline"!==t.style.display?r():a())}),!1)},open:r}}}));

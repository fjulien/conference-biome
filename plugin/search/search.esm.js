/*!
 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
 * by navigatating to that slide and highlighting it.
 *
 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
 */
const e=()=>{let e,t,n,l,o,s,i;function r(){t=document.createElement("div"),t.classList.add("searchbox"),t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex=10,t.innerHTML='<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>\n\t\t</span>',n=t.querySelector(".searchinput"),n.style.width="240px",n.style.fontSize="14px",n.style.padding="4px 6px",n.style.color="#000",n.style.background="#fff",n.style.borderRadius="2px",n.style.border="0",n.style.outline="0",n.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",n.style["-webkit-appearance"]="none",e.getRevealElement().appendChild(t),n.addEventListener("keyup",(t=>{if(13===t.keyCode)t.preventDefault(),function(){if(s){const e=n.value;""===e?(i&&i.remove(),l=null):(i=new c("slidecontent"),l=i.apply(e),o=0)}l&&(l.length&&l.length<=o&&(o=0),l.length>o&&(e.slide(l[o].h,l[o].v),o++))}(),s=!1;else s=!0}),!1),a()}function d(){t||r(),t.style.display="inline",n.focus(),n.select()}function a(){t||r(),t.style.display="none",i&&i.remove()}function c(t,n){const l=document.getElementById(t)||document.body,o=n||"EM",s=new RegExp(`^(?:${o}|SCRIPT|FORM)$`),i=["#ff6","#a0ffff","#9f9","#f99","#f6f"],r=[];let d=0,a="";const c=[];this.setRegex=e=>{e=e.trim(),a=new RegExp(`(${e})`,"i")},this.getRegex=()=>a.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," "),this.hiliteWords=function(t){if(void 0!==t&&t&&a&&!s.test(t.nodeName)){if(t.hasChildNodes())for(let e=0;e<t.childNodes.length;e++)this.hiliteWords(t.childNodes[e]);if(3===t.nodeType){let n,l;if((n=t.nodeValue)&&(l=a.exec(n))){let n=t;for(;null!=n&&"SECTION"!==n.nodeName;)n=n.parentNode;const s=e.getIndices(n),a=c.length;let p=!1;for(let e=0;e<a;e++)c[e].h===s.h&&c[e].v===s.v&&(p=!0);p||c.push(s),r[l[0].toLowerCase()]||(r[l[0].toLowerCase()]=i[d++%i.length]);const h=document.createElement(o);h.appendChild(document.createTextNode(l[0])),h.style.backgroundColor=r[l[0].toLowerCase()],h.style.fontStyle="inherit",h.style.color="#000";const f=t.splitText(l.index);f.nodeValue=f.nodeValue.substring(l[0].length),t.parentNode.insertBefore(h,f)}}}},this.remove=()=>{const e=document.getElementsByTagName(o);let t;for(;e.length&&(t=e[0]);)t.parentNode.replaceChild(t.firstChild,t)},this.apply=function(e){if(void 0!==e&&e)return this.remove(),this.setRegex(e),this.hiliteWords(l),c}}return{id:"search",init:n=>{e=n,e.registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",(e=>{"F"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),t||r(),"inline"!==t.style.display?d():a())}),!1)},open:d}};export{e as default};
